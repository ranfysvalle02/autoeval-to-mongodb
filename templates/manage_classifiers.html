<!DOCTYPE html>  
<html lang="en">  
<head>  
    <meta charset="UTF-8">  
    <title>Manage Classifiers</title>  
    <!-- Include your CSS styles here -->  
    <style>  
        /* Include your CSS styles here or in a separate CSS file */  
        body {  
            margin: 0;  
            font-family: 'Roboto', sans-serif;  
            background-color: #f5f7fa;  
            color: #333;  
        }  
        header, footer {  
            background-color: #2c3e50;  
            color: white;  
            padding: 1em 0;  
            text-align: center;  
        }  
        nav {  
            background-color: #34495e;  
            padding: 0.5em 0;  
        }  
        nav ul {  
            list-style-type: none;  
            text-align: center;  
            margin: 0;  
            padding: 0;  
        }  
        nav ul li {  
            display: inline-block;  
            margin: 0 1em;  
        }  
        nav ul li a {  
            color: white;  
            font-weight: bold;  
            text-decoration: none;  
        }  
        main {  
            padding: 2em;  
            max-width: 1200px;  
            margin: 0 auto;  
        }  
        h2 {  
            color: #2c3e50;  
            margin-top: 1.5em;  
        }  
        .form-group {  
            margin-bottom: 1em;  
        }  
        .form-group label {  
            display: block;  
            font-weight: bold;  
            margin-bottom: 0.5em;  
        }  
        .form-group input[type="text"],  
        .form-group textarea,  
        .form-group select {  
            width: 100%;  
            padding: 0.75em;  
            border: 1px solid #ccd1d9;  
            border-radius: 4px;  
            font-size: 1em;  
        }  
        .btn {  
            display: inline-block;  
            padding: 0.5em 1em;  
            margin: 0.2em 0;  
            background-color: #3498db;  
            color: white;  
            border: none;  
            border-radius: 4px;  
            cursor: pointer;  
            text-decoration: none;  
            text-align: center;  
        }  
        .btn-danger {  
            background-color: #e74c3c;  
        }  
        table {  
            width: 100%;  
            border-collapse: collapse;  
            margin-top: 1em;  
        }  
        table th, table td {  
            border: 1px solid #ddd;  
            padding: 0.5em;  
            vertical-align: top;  
        }  
        .error {  
            color: #e74c3c;  
            margin: 1em 0;  
        }  
        .success {  
            color: #27ae60;  
            margin: 1em 0;  
        }  
    </style>  
</head>  
<body>  
    <header>  
        <h1>Manage Classifiers</h1>  
    </header>  
  
    <!-- Navigation Menu -->  
    <nav>  
        <ul>  
            <li><a href="{{ url_for('index') }}">Home</a></li>  
            <li><a href="{{ url_for('list_indexes') }}">Manage Atlas Search Indexes</a></li>  
            <li><a href="{{ url_for('manage_classifiers') }}">Manage Classifiers</a></li>  
            <!-- Add more navigation items if needed -->  
        </ul>  
    </nav>  
  
    <main>  
        {% if error_message %}  
            <p class="error">{{ error_message }}</p>  
        {% endif %}  
        {% if success_message %}  
            <p class="success">{{ success_message }}</p>  
        {% endif %}  
  
        <h2>Create New Classifier</h2>  
        <form method="post" action="{{ url_for('manage_classifiers') }}">  
            <input type="hidden" name="action" value="create_classifier">  
            <div class="form-group">  
                <label for="name">Classifier Name:</label>  
                <input type="text" id="name" name="name" required placeholder="Enter classifier name"  
                       value="{{ default_classifier.name }}">  
            </div>  
            <div class="form-group">  
                <label for="prompt_template">Prompt Template:</label>  
                <textarea id="prompt_template" name="prompt_template" required placeholder="Enter prompt template">{{ default_classifier.prompt_template }}</textarea>  
                <small>Use <code>{{ '{{output}}' }}</code> as a placeholder for the text to classify.</small>  
            </div>  
            <div class="form-group">  
                <label for="choice_scores">Choice Scores (JSON format):</label>  
                <textarea id="choice_scores" name="choice_scores" required>{{ default_classifier.choice_scores | tojson(indent=2) }}</textarea>  
                <small>Enter a JSON object mapping choices to scores.</small>  
            </div>  
            <div class="form-group">  
                <label for="use_cot">Use Chain-of-Thought (CoT):</label>  
                <input type="checkbox" id="use_cot" name="use_cot" {% if default_classifier.use_cot %}checked{% endif %}>  
            </div>  
            <div class="form-group">  
                <label for="model_deployment_name">Model Deployment Name:</label>  
                <select id="model_deployment_name" name="model_deployment_name">  
                    {% for deployment_name in deployment_names %}  
                        <option value="{{ deployment_name }}" {% if deployment_name == default_classifier.model_deployment_name %}selected{% endif %}>{{ deployment_name }}</option>  
                    {% endfor %}  
                </select>  
                <small>Select the model to use for the classifier.</small>  
            </div>  
            <div class="form-group">  
                <label for="temperature">Temperature:</label>  
                <input type="number" step="0.1" id="temperature" name="temperature" value="{{ default_classifier.temperature }}">  
                <small>Set the temperature for the model (e.g., 0.0).</small>  
            </div>  
            <div class="form-actions">  
                <button type="submit" class="btn">Create Classifier</button>  
            </div>  
        </form>  
  
        <h2>Existing Classifiers</h2>  
        {% if classifiers %}  
            <table>  
                <thead>  
                    <tr>  
                        <th>Name</th>  
                        <th>Prompt Template</th>  
                        <th>Choice Scores</th>  
                        <th>Use CoT</th>  
                        <th>Model Deployment</th>  
                        <th>Temperature</th>  
                        <th>Actions</th>  
                    </tr>  
                </thead>  
                <tbody>  
                    {% for classifier in classifiers %}  
                        <tr>  
                            <td>{{ classifier.name }}</td>  
                            <td><pre>{{ classifier.prompt_template }}</pre></td>  
                            <td><pre>{{ classifier.choice_scores_str }}</pre></td>  
                            <td>{{ 'Yes' if classifier.use_cot else 'No' }}</td>  
                            <td>{{ classifier.model_deployment_name }}</td>  
                            <td>{{ classifier.temperature }}</td>  
                            <td>  
                                <!-- Delete action -->  
                                <form method="post" action="{{ url_for('manage_classifiers') }}" style="display:inline;">  
                                    <input type="hidden" name="action" value="delete_classifier">  
                                    <input type="hidden" name="classifier_id" value="{{ classifier._id }}">  
                                    <button type="submit" class="btn btn-danger">Delete</button>  
                                </form>  
                                <!-- Test action -->  
                                <form method="get" action="{{ url_for('test_classifier', classifier_id=classifier._id) }}" style="display:inline;">  
                                    <button type="submit" class="btn">Test</button>  
                                </form>  
                            </td>  
                        </tr>  
                    {% endfor %}  
                </tbody>  
            </table>  
        {% else %}  
            <p>No classifiers found.</p>  
        {% endif %}  
    </main>  
  
    <footer>  
        <p>&copy; {{ current_year }} Your Company Name</p>  
    </footer>  
</body>  
</html>  